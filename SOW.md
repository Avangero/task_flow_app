# Тестовое ТЗ для Laravel-разработчика

## Общее описание

Необходимо разработать RESTful API для системы управления задачами с функциональностью для пользователей, проектов и задач. Система должна поддерживать аутентификацию, авторизацию и базовую аналитику.  
Проект должен быть реализован с акцентом на чистоту архитектуры, соблюдение принципов SOLID, читаемость и логическую декомпозицию кода.  
**Время выполнения: 25-30 часов**

---

## Функциональные требования

### 1. Аутентификация и авторизация

- Регистрация и авторизация пользователей через API
- JWT или Sanctum токены
- Middleware для защиты маршрутов
- Роли пользователей: `admin`, `manager`, `user`

---

### 2. Управление пользователями

**Модель User:**

- `id`
- `first_name`
- `last_name`
- `email`
- `password`
- `role_id` (связь с Role)
- `status` (`active`, `inactive`, `blocked`)
- `avatar` (путь к файлу аватара)
- `phone`
- `remember_token`
- `created_at`
- `updated_at`

**Модель Role:**

- `id`
- `slug`
- `name`
- `permissions`
- `is_active`
- `created_at`
- `updated_at`

**Роли и права доступа:**

- `admin` - полный доступ ко всем ресурсам
- `manager` - может создавать проекты и управлять задачами в своих проектах
- `user` - может просматривать назначенные задачи и обновлять их статус

**API endpoints:**

- `GET /api/users` - список пользователей (`admin`, `manager`)
- `GET /api/users/{id}` - информация о пользователе
- `PUT /api/users/{id}` - обновление профиля (свой профиль или `admin`)

---

### 3. Управление проектами

**Модель Project:**

- `id`
- `name`
- `description`
- `status` (`active`, `completed`, `archived`)
- `created_by` (связь с User)
- `created_at`
- `updated_at`

**API endpoints:**

- `GET /api/projects` - список проектов (с фильтрацией по статусу)
- `POST /api/projects` - создание проекта (`manager`, `admin`)
- `GET /api/projects/{id}` - детали проекта
- `PUT /api/projects/{id}` - обновление проекта (автор или `admin`)
- `DELETE /api/projects/{id}` - удаление проекта (автор или `admin`)

---

### 4. Управление задачами

**Модель Task:**

- `id`
- `title`
- `description`
- `status` (`pending`, `in_progress`, `completed`)
- `priority` (`low`, `medium`, `high`)
- `project_id` (связь с Project)
- `assigned_to` (связь с User)
- `created_by` (связь с User)
- `due_date`
- `created_at`
- `updated_at`

**API endpoints:**

- `GET /api/tasks` - список задач с фильтрацией и сортировкой
- `POST /api/tasks` - создание задачи (`manager`, `admin`)
- `GET /api/tasks/{id}` - детали задачи
- `PUT /api/tasks/{id}` - обновление задачи
- `DELETE /api/tasks/{id}` - удаление задачи (автор или `admin`)

**Фильтрация и сортировка:**

- По статусу, приоритету, проекту, исполнителю
- По дате создания, дедлайну
- Пагинация (15 элементов на страницу)

---

### 5. Аналитика (дашборд)

`GET /api/statistics` - общая статистика:

- Общее количество проектов/задач
- Количество задач по статусам
- Просроченные задачи
- Топ-5 самых активных пользователей (по количеству созданных задач)

---

### 6. Queue jobs для отправки email-уведомлений

Предполагается создание Job классов, Mail классов, а также blade-шаблонов под каждый тип email-уведомления.

**Типы уведомлений:**

- Уведомление о назначении на задачу
- Уведомление об изменении статуса задачи
- Уведомление об изменении статуса проекта

---

## Технические требования

### Обязательные технологии

- Laravel 10+
- PHP 8.1+
- MySQL / PostgreSQL
- JWT / Sanctum для аутентификации

---

### Архитектура и код

- Repository Pattern для работы с данными
- Service Layer для бизнес-логики
- Form Requests для валидации
- API Resources для форматирования ответов
- Middlewares для авторизации
- Database Seeders с тестовыми данными

---

### База данных

- Migrations для всех таблиц
- Foreign keys и индексы
- Database seeder с минимум:
  - 1 `admin`, 2 `manager`, 5 `user`
  - 3 проекта
  - 20 задач

---

### Обработка ошибок

- Централизованная обработка исключений
- Валидация входных данных
- Информативные сообщения об ошибках
- HTTP статус-коды

---

### Дополнительные задачи (по желанию)

- Кеширование статистики дашборда (Redis)
- API rate limiting
- Docker конфигурация

---

## Что включить в README

- Инструкции по установке и настройке
- Команды для миграций и seed данных
- Описание API endpoints
- Примеры запросов (curl или Postman коллекция)
- Команда для запуска тестов
- Тестовые данные для входа (логины / пароли)

---

## Итого: 25-30 часов

---

## Результат сдачи

- Git репозиторий с кодом / архив с проектом
- README с инструкциями
- Готовая к запуску система с тестовыми данными
```
